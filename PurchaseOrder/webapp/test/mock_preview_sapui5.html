<!DOCTYPE html>
<html>
<!-- Copyright (c) 2015 SAP AG, All Rights Reserved -->
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		
			<script type="text/javascript">
				window["sap-ushell-config"] = {
					defaultRenderer : "fiori2",
					renderers: {
						fiori2: {
							componentData: {
								config: {
									search: "hidden"
								}
							}
						}
					},
					applications: {
						"BUILD-prototype": {
							additionalInformation: "SAPUI5.Component=com.sap.build.standard.purchaseOrder",
							applicationType: "URL",
							url: "../",
							description: "",
							title: "Purchase Order"
						}
					}
				};
			</script>
			<script src="/test-resources/sap/ushell/bootstrap/sandbox.js" id="sap-ushell-bootstrap"></script>
		
        <title>Purchase Order</title>

		<!-- Bootstrap the UI5 core library -->
		<script id="sap-ui-bootstrap"
				src="/resources/sap-ui-core.js"
                data-sap-ui-libs="sap.m,sap.ushell"
				data-sap-ui-theme="sap_belize_plus"
				
                data-sap-ui-supportedLanguages="en"
                data-sap-ui-bindingSyntax="complex"
				data-sap-ui-compatVersion="edge" 
				data-sap-ui-resourceroots='{"com.sap.build.standard.purchaseOrder":"../"}'
				data-sap-ui-frameOptions='allow'> // NON-SECURE setting for testing environment
		</script>
<script>
var bRunWithMock = true;
var sRunWithMock = jQuery.sap.getUriParameters().get('run-with-mock');
if (sRunWithMock === 'false') {
bRunWithMock = false;
}
if (bRunWithMock) {
jQuery.sap.require('sap.ui.core.util.MockServer');
var uri = '/here/goes/your/serviceUrl/local/';
var oMock = new sap.ui.core.util.MockServer({rootUri : uri});
var _sAppModulePath = "com.sap.build.standard.purchaseOrder/";
var sMetadataPath = "localService/metadata.xml";
var sMetadataUrl = jQuery.sap.getModulePath(_sAppModulePath + sMetadataPath.replace(".xml", ""), ".xml");
oMock.simulate(sMetadataUrl);
oMock.start();
	jQuery(document).ready(function($) {  sap.m.MessageToast.show('Running in demo mode with mock data.', {  duration : 4000 });
});
new sap.ui.core.util.MockServer({rootUri: "/localService/", requests: [{ method: "GET", path: new RegExp(""),
response: function(oXhr) { 
jQuery.sap.require("jquery.sap.xml");
var oAnnotations = jQuery.sap.sjax({ url: jQuery.sap.getModulePath(_sAppModulePath + "/localService/metadata.xml".replace(".xml", ""), ".xml"),
dataType: "xml"}).data;
oXhr.respondXML(200, {}, jQuery.sap.serializeXML(oAnnotations));
return true;
}
}]
}).start();
//Fake LREP
jQuery.sap.require("sap.ui.fl.FakeLrepConnector");
sap.ui.fl.FakeLrepConnector.enableFakeConnector("fakeLRep.json");
}
</script>


		<script type="text/javascript">
        		sap.ui.getCore().attachInit(function() {
        	        //Fake LREP
        	        jQuery.sap.require("sap.ui.fl.FakeLrepConnector");
        	        sap.ui.fl.FakeLrepConnector.enableFakeConnector("fakeLRep.json");

        	        
        				
        				sap.ui.require([
        					"com/sap/build/standard/purchaseOrder/localService/mockserver"
        				], function (server) {
        					// set up test service for local testing
        					server.init();
        					
        						// initialize the ushell sandbox component
        						sap.ushell.Container.createRenderer().placeAt("app");
        					
                        });
            		
            	});
        	</script>

	</head>

	<!-- UI Content -->
	<body class="sapUiBody" id="app" rootUiArea>
	</body>
</html>